## Важно

unit-тесты для слоя repository и e2e тесты были выполнены после дедлайна (в течение 4 часов после его окончания)

коммиты, содержащие их, содержат префикс в названии: `AFTER DEADLINE`

Мной было принято решение предоставить реализацию данных пунктов ТЗ, несмотря на окончание дедлайна.
## Конфигурация проекта

Для демонстрации работы используются тестовые конфигурационные файлы:
`deploy/.env.dev`
`test_config.yaml`

Конфигурация линтера:
`.golangci.yml`

## Запуск проекта

### Варианты запуска

#### Makefile

С помощью команды 

```shell
make docker-buildup 
```

#### Docker

```shell
cd deploy
```
Включить сборку:
```shell
docker compose --env-file .env.dev up --build -d
```
Без сборки:
```shell
docker compose --env-file .env.dev up -d
```
#### Локально(без поднятия БД)

```shell
go run cmd/avito_shop/main.go
```

## Makefile

Помимо запуска Makefile предоставляет различный функционал. К примеру запуск тестов:

```shell
make test
```

Также можно получить процент покрытия тестами:


```shell
make coverage
```
Процент покрытия, включая директории `dto` и `models` составляет 41,6%
После добавление unit тестов для repository покрытие составляет 59,7%


Полный функционал с описанием можно увидеть после ввода команды:

```shell
make help
```

## Нагрузочное тестирование

Результаты нагрузочного тестирования находятся в `test/`, файлы report.txt, metrics.json, plot.html. Сам скрипт для запуска - `loadtest.sh`

процент в виде 85% обусловлен тем, что на определенном этапе у одного из тестовых пользователей закончились монеты

## E2E тестирование

е2е-тесты находятся в директории `test/e2e`, там же находится конфигурационный файл для них `test_config.yaml`

для проведения тестов также была поднята тестовая БД (запускать нужно из корня проекта, чтобы был доступ к миграциям):

```shell
sudo docker run --name db -p 5431:5432 \
    -e POSTGRES_USER=postgres \
    -e POSTGRES_PASSWORD=postgres \
    -e POSTGRES_DB=mydb \
    -v ./migrations:/docker-entrypoint-initdb.d \
    -d postgres:17

```

запуск тестов:

```shell
go test ./test/e2e  
```
